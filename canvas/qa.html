<!DOCTYPE html><html lang=en><head><meta charset=utf-8 /><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1" /><meta name=viewport content="width=device-width,initial-scale=1.0,user-scalable=no" /><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png /><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png /><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png /><link rel=manifest href=/site.webmanifest /><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5 /><meta name=msapplication-TileColor content=#da532c /><meta name=theme-color content=#ffffff /><title>canvas问题 | canvas-demo | Mirror Space</title><link href=/mirrorui/mirrorui.css rel=stylesheet /><link href=/asset/css/blog.css rel=stylesheet /></head><body><div class=layout><div class=layout-part1><a class="mainmenu-onoff d-block d-md-none" onclick=mainmenuonoff()>Ω</a><div id=mainmenubox class="mainmenu d-none d-md-block"><div class=logobox> <img src=/asset/img/logo.jpg class=logoimg /></div><h3 class=pd-5>Mirror Space</h3><hr class=line /><a class=mainmenu-link href=/index.html>Home</a> <a class=mainmenu-link href=/about.html>About</a> <a class=mainmenu-link href=/projectinfo.html>Info</a><div class=theme id=themebox> <a class=mainmenu-btn onclick=changetheme(1)>白天sun</a> <a class=mainmenu-btn onclick=changetheme(2)>夜晚moon</a><br /> <a class=mainmenu-btn onclick=changefontsize(14)>A</a> <a class=mainmenu-btn onclick=changefontsize(16)>AA</a> <a class=mainmenu-btn onclick=changefontsize(20)>AAA</a></div></div><script src=/asset/js/mainmenu.js></script></div><div class=layout-part2><h1>canvas相关问题</h1><h3>画布尺寸</h3><p>&lt;&lt;H5核心技术图形动画与游戏开发(David Geary)>> (4页)</p><p>canvas使用style="width:500px"设置和在元素上设置width=500,效果不一样.</p><p>因为元素有两套尺寸,一个是canvas元素尺寸,一个是绘图表面尺寸.使用style时,只修改元素尺寸.使用width时,都修改了</p><p>何时修改尺寸,例如下述代码.要先修改尺寸,再设置其它属性比如字体之类的.否则结果可能意想不到.</p>
<pre>
   let ctx = getCanvas2d('canvas2');
<strong>ctx.canvas.width = 600;</strong>
   ctx.font = '16px serial';
</pre><h3>默认坐标系统</h3><p>&lt;&lt;H5核心技术图形动画与游戏开发(David Geary)>> (46页)</p><p>以左上角为顶点,向右为X轴,向下为Y轴,默认大小为 300 X 150</p><canvas id=canvas1></canvas><h3>物体碰撞</h3><p>&lt;&lt;H5核心技术图形动画与游戏开发(David Geary)>> (42页)</p><p>当某个运动的物体同某个静止的物体发生碰撞时,如果我们需要让运动的物体被静止物体弹开....,通过计算两个向量的点积</p><p>&lt;&lt;H5核心技术图形动画与游戏开发(David Geary)>> (43页)</p><p>等式推导,用于编程时未知的量</p><h3>HSL颜色值</h3><p>&lt;&lt;H5核心技术图形动画与游戏开发(David Geary)>> (51页)</p><p>类似rgb(红,绿,蓝),hsl在表示形式上也是这种,hsl(颜色,饱和度,亮度).颜色值在一个圆形的区域中选择,0(360)度,表示红色,120度是绿色,240是蓝色</p><p>饱和度范围(100%~0),亮度范围(100%~0),这种颜色格式有点像调整显示器的饱和度和亮度.</p><canvas id=canvas2></canvas><script>function test2(){var t;let n=getCanvas2d("canvas2");n.canvas.width=500;n.font="18px serial";n.fillText("HSL(0~360,100%,50%)",20,20);let i=(t,i)=>{n.beginPath(),n.moveTo(0,0),n.fillStyle=`HSL(${t},100%,50%)`,n.arc(0,0,50,i*(Math.PI/180),(i+1)*(Math.PI/180)),n.fill()};for(n.save(),n.translate(60,80),t=0;t<119;t++)i(t,t),i(120+t,120+t),i(240+t,240+t);n.restore();n.save();n.translate(230,10);let r=(t,i,r,u,f)=>{n.beginPath(),n.moveTo(0,0),n.fillStyle=`RGB(${t},${i},${r})`,n.fillRect(u,f,1,20)};for(t=0;t<255;t++)r(t,0,0,t,15),r(0,t,0,t,60),r(0,0,t,t,105);n.fillStyle="black";n.fillText("R(0~255,0,0)",50,10);n.fillText("G(0,0~255,0)",50,55);n.fillText("B(0,0,0~255)",50,100)}function test1(){var t;let n=getCanvas2d("canvas1");for(n.canvas.width=400,n.canvas.height=210,n.font="16px serial",n.translate(30,30),lineArrow(n,[0,0,300,0]),n.fillText("X",320,10),t=0;t<7;t++)n.fillText(t*50,t*50-10,-10),n.moveTo(t*50,0),n.lineTo(t*50,10),n.stroke();for(lineArrow(n,[0,0,0,150]),n.fillText("Y",-5,175),t=1;t<4;t++)n.fillText(t*50,-30,t*50),n.moveTo(0,t*50),n.lineTo(10,t*50),n.stroke();n.moveTo(150,50);n.lineTo(75,125);n.lineTo(225,125);n.closePath();n.stroke()}function lineArrow(n,t,i=12,r=10,u=true){n.beginPath();n.moveTo(t[0],t[1]);for(var o=2;o<t.length;o+=2)n.lineTo(t[o],t[o+1]);n.stroke();let f={x:t[t.length-2],y:t[t.length-1]},e={x:t[t.length-4],y:t[t.length-3]},s=0;if(f.x==e.x)n.save(),n.translate(f.x,f.y),n.rotate(Math.PI/2),n.beginPath(),s=f.y>e.y?r:-r;else{let t=(f.y-e.y)/(e.x-f.x);n.save();n.translate(f.x,f.y);n.rotate(-Math.atan(t));s=f.x>e.x?r:-r}n.beginPath();n.moveTo(0,-i/2);n.lineTo(0,i/2);n.lineTo(s,0);n.closePath();u==!0?n.fill():n.stroke();n.restore()}function getCanvas2d(n){let t=document.querySelector("#"+n);t.style.display="block";t.style.margin="20px";t.style.backgroundColor="#f0f0f0";return t.getContext("2d")}test1();test2()</script></div></div></body></html>