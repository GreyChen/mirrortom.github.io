<!DOCTYPE html><html lang=en><head><meta charset=utf-8 /><meta http-equiv=X-UA-Compatible content="IE=edge" /><meta name=viewport content="width=device-width,initial-scale=1.0" /><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png /><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png /><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png /><link rel=manifest href=/site.webmanifest /><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5 /><meta name=msapplication-TileColor content=#da532c /><meta name=theme-color content=#ffffff /><title>事件 | canvas-demo | Mirror Space</title><link href=/mirrorui/mirrorui.css rel=stylesheet /><style scoped>.layout{display:grid;grid-template-columns:210px auto;min-height:100vh}.layout-right{padding:30px}</style></head><body><div class=layout><div class=layout-left><style>.mainmenu{position:sticky;top:122px;text-align:center}.mainmenu a{color:var(--graybackse);text-decoration:none}.mainmenu a:hover,.mainmenu a.active{color:var(--fontcolor);text-decoration:underline}.logobox{width:144px;height:144px;overflow:hidden;border-radius:50%;margin:22px auto}.logoimg{margin-left:-56px;animation:circleRoate 6s infinite linear}@keyframes circleRoate{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}</style><div class=mainmenu><div class=logobox><img src=/asset/img/logo.jpg class=logoimg /></div><h3>Mirror Space</h3><hr class=line /><a href=/index.html><h4>Home</h4></a> <a href=/about.html><h4>About</h4></a> <a href=/projectinfo.html><h4>Info</h4></a></div></div><div class=layout-right><h1>鼠标,键盘,触摸</h1><p>浏览器鼠标坐标位置换算到画布windowToCanvas(),用事件对象得到的坐标减去canvas元素的top,left值</p><p>下方画布,按住拖动可画线.按键盘则打印出按键字符(支持打印出a-z小写)</p><a class=btn onclick=clearDraw()>清空画布</a> <canvas id=canvas1><h3>不支持canvas</h3></canvas><p><span class="label text-danger xl" id=px></span><span class="label text-danger xl" id=py></span></p><h4>鼠标画线实现关键</h4><p>鼠标按住画线: 监听鼠标按下(mousedown),鼠标移动(mousemove)这两个事件,按下事件中判断是左键按下时,调用moveTo(),</p><p>移动事件中,同样要判断移动同时是按住左键的,调用lineTo().这样就能实现鼠标画线</p><h4>按键盘打字实现关键</h4><p>监听键盘keyup事件,这是在按键释放后触发的.由于canvas不能监听键盘事件,所以要在window或document对象上监听</p><p>监听到事件后,判断键值是否为26个字母对应键值,然后调用fillText()画出对应字母</p><script>function clearDraw(){let n=getCanvas2d("canvas1");n.clearRect(0,0,300,150)}function test1(){let i=document.querySelector("#canvas1"),t=getCanvas2d("canvas1"),r=document.querySelector("#px"),u=document.querySelector("#py"),n={x:0,y:0};i.addEventListener("mousemove",f=>{n=windowToCanvas(i,f.x,f.y),r.innerHTML="X: "+n.x,u.innerHTML="Y: "+n.y,f.buttons==1&&(t.lineTo(n.x,n.y),t.stroke())});i.addEventListener("mousedown",r=>{n=windowToCanvas(i,r.x,r.y),r.buttons==1&&(t.beginPath(),t.moveTo(n.x,n.y))});window.document.addEventListener("keyup",i=>{i.keyCode>=65&&i.keyCode<=90&&(t.fillText(i.key,n.x,n.y),n.x+=5)})}function windowToCanvas(n,t,i){let r=n.getBoundingClientRect();return{x:t-r.left,y:i-r.top}}function getCanvas2d(n){let t=document.querySelector("#"+n);t.style.display="block";t.style.margin="20px";t.style.backgroundColor="#f0f0f0";return t.getContext("2d")}test1()</script></div></div></body></html>