(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5912f01e"],{"57b1":function(t,n,e){"use strict";var a=e("f99d"),c=e.n(a);c.a},"9a6f":function(t,n,e){"use strict";e.r(n);var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"wz-page"},[e("articleheader"),e("p",[t._v("最近我正在研究权限管理系统,以为自己搞得很清楚了.但今天看到这观点后,发现一切都变了.")]),e("p",[t._v('角色,权限,数据表,哪种角色有哪种权限操作什么数据表,这是一种基于数据表的权限系统.本文称为"经典权限"')]),e("p",[t._v("而看了评论之后,这种经典权限的思想又被毁了.")]),e("p",[t._v("观感")]),e("p",[t._v("从来没有想清楚过权限系统,只知道权限系统的目的是为了让不同的系统用户拥有不同的操作权力.")]),e("p",[t._v("在业务中需要权限系统,于是就看了好多这方面的文章.大概思路都是将权限设计为一个公式,即:谁有没有权限干什么操作")]),e("p",[t._v('围绕这个公式设计了数据表,大概5张表可以表示清楚.如用户,角色,用户角色关系,这三张表表示了"谁",权限表示了"操作",权限角色关系表,表示了"有没有权限"')]),e("p",[t._v("在界面上有个操作,可以配置谁有哪种权限.于是就能达到在这个系统中,不同人的权限不一样.它是由这五张表决定的.")]),e("p",[t._v("似乎到这里都没有什么问题,但直到看到这个回贴之后,觉得问题其实很大,是一个设计思想的问题.")]),e("p",[t._v("它无法解决变化的东西,而现实总是变化的.系统却是不变的,至少是不能灵活应变的.")]),e("p"),e("p",[t._v("csdn上抄的sp1234大神的回复贴子原文")]),e("p",[t._v("1.说了半天，其实就是从数据表为主的设计，改为操作菜单为主的设计。其实还远远不够！")]),e("p",[t._v("2.我来戳破一下这种传统的垃圾泡沫：")]),e("p",[t._v("\n    3.首先，假设以 lz 说认为很不好的那种设计方法，它是针对静态数据表的。它明显是说某些人、某些角色，对某些数据表有增删改查权限。这样就很难应用到实际流程中，因为实际管理流程往往需要在不断地进行管理方式探索和调整中去改变各个工作节点对数据的查询修改方式，管理是高级的——而数据表是低级的，其实不是因为程序员设计了数据表所以管理者才知道怎样管理，相反地100数据表往往并不对应着20个管理流程中的100个管理界面，也就是数据表跟管理流程细节存在着严重的“阻抗不对称”性，会产生严重的分歧。\n")]),e("p",[t._v("\n    4.那么 lz 于是归结为菜单权限，归结为一个人有没有权限打开某种界面的做法上。这其实是一种简化，如果是为了扬弃上面的错误的做法，那么完全可以理解。但是这肯定是极端简化的情况。因为很简单，比如说要处理用户报修任务，那么系统就根据保修的内容将下一级任务派发给完全不同的单位的人员了，然后不同的单位有不同的处理流程，比如说是负责电的部门跟负责水管的部门的人处理报修的流程就不同，进一步地任何一个工作深入了之后其涉及到的人、物、“数据”都跟流程走、而不是跟这人或者部门走。\n")]),e("p",[t._v("\n    5.lz 所做出的考虑，本质上还是数据的静态思维方式，也就是认为给某些角色的人赋予某种数据或者程序界面的进入权限就万事大吉了。而真正的企业管理软件应该是按照流程走的，比如说我把某个申请书给了一个银行专管员，那么这个银行人员就能看到我的详细资料，然后按照内部流程走下去、随后的银行其它人员能够看我的详细资料的一部分。而负责其它十几亿人的申请书的银行人员，只要他没有参与我的申请流程，就不可能看到我的资料的任何一部分。这个时候如果你纠结某种数据表应该被某些人你随便查看和修改、或者某种操作模块应该被某些人随便查看和使用，那么是不是就太 low 了呢？\n")]),e("p",[t._v("6.这还有一个重要的原因，就是很多信息系统里边的数据库数据，其实都是比较原始的查询信息，也就是让企业（不管多大）雇佣几个录入人员录入的档案信息。以这种思维方式设计的软件，必定就是简单的增删该查思维方式。")]),e("p",[t._v("7.而管理工作流系统就好是软件信息的版本管理系统一样，或者说好像是区块链的基础版本系统一样，数据是行为日志，数据决不允许“删改”，只允许“增查”。当你有这样的数据结构，再来看管理软件中的“权限控制”，你就非常简单和直观了，每一个人只看自己的行为历史就行了。一个领导假设需要看报表，那么她发起一个任务，让系统给她自己发来一份报告，那么这个报告是她自己的私有的一条数据，而不是什么别人的数据被她看到。")]),e("p",[t._v("8.lz 所说“不可能“编码管理”作为一个类型的角色，因为它涉及到不同的管理层面；试想如果把其中任意组合的“编码”作为一个角色，这种组合有......”这就是把角色看成了数据表（或者说是数据表中的分类Class字段）的查询约束了！这就是翻来覆去都是对静态数据库表（或者是表中的某一个分类字段）查询约束的思路，永远跳不出这个思路！")]),e("p",[t._v("9.这就是传统的数据库表设计模式跟管理信息系统的多变（每一个企业都不太一样）的阻抗不匹配性的最主要原因！企业管理流程经常变化，那么开发管理信息系统的根本核心是从数据库表出发还是从管理流程出发？")]),e("p",[t._v("10.管理流程变化中，往往是某个环节的某个表单就是要去综合访问许多表的个别字段，也许某个表单今天不需要访问库存表、而明天就需要访问库存表的50个字段中的5个字段。那么你说某用户、或者某雷用户到底有没有访问库存表的权限？或者访问库存表中某类编码的库存的权限？")]),e("p",[t._v("11.这纯粹是坑爹的——但是却是很多人乐此不疲地——权限管理思维方式。他是从数据表出发，而不是从管理流程出发。如果从管理流程出发那么权限即使定义到了“每一个记录 and 每一个字段”这一级别，也还是不行，因为还是有时间因素、历史因素，例如一个权限其实是从一个流程的发起人开始、中间每一个审批或者填写的过程都会改变随后的流程表现，而这就直接决定了随后的数据的权限。所以“每一个记录 and 没一个字段”其实权限都取决于每一个创建它的流程的整个历史链条的共同作用，而不是什么静态地写死、预先规定谁能访问某类数据！")])],1)},c=[],s=e("d225"),r=e("308d"),i=e("6bb5"),u=e("4e2b"),p=e("9ab4"),v=e("60a3"),_=e("dedd"),b=function(t){function n(){return Object(s["a"])(this,n),Object(r["a"])(this,Object(i["a"])(n).apply(this,arguments))}return Object(u["a"])(n,t),n}(v["b"]);b=p["a"]([Object(v["a"])({components:{articleheader:_["a"]}})],b);var l=b,o=l,d=(e("f2cf"),e("2877")),f=Object(d["a"])(o,a,c,!1,null,"6e0e22b4",null);n["default"]=f.exports},c0d5:function(t,n,e){},dedd:function(t,n,e){"use strict";var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("h1",{staticClass:"text-center"},[t._v(t._s(this.$route.query.title))]),e("h5",[t._v("\n        作者: \n        "),e("span",[t._v(t._s(this.$route.query.author))])]),e("h5",[t._v("\n        日期: \n        "),e("span",[t._v(t._s(this.$route.query.date))])]),e("a",{staticClass:"btn link backbtn",on:{click:function(n){return t.goback()}}},[t._v("返回上页")]),e("hr",{staticClass:"line"})])},c=[],s=e("d225"),r=e("b0b4"),i=e("308d"),u=e("6bb5"),p=e("4e2b"),v=e("9ab4"),_=e("60a3"),b=function(t){function n(){return Object(s["a"])(this,n),Object(i["a"])(this,Object(u["a"])(n).apply(this,arguments))}return Object(p["a"])(n,t),Object(r["a"])(n,[{key:"goback",value:function(){this.$router.go(-1)}}]),n}(_["b"]);b=v["a"]([_["a"]],b);var l=b,o=l,d=(e("57b1"),e("2877")),f=Object(d["a"])(o,a,c,!1,null,"cad40f34",null);n["a"]=f.exports},f2cf:function(t,n,e){"use strict";var a=e("c0d5"),c=e.n(a);c.a},f99d:function(t,n,e){}}]);