(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b5465a5a"],{"4d27":function(e,t,a){},8786:function(e,t,a){"use strict";var n=a("4d27"),r=a.n(n);r.a},dedd:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",{staticClass:"text-center"},[e._v(e._s(e.data.title))]),a("h5",[e._v("\n        作者: \n        "),a("span",[e._v(e._s(e.data.author))])]),a("h5",[e._v("\n        日期: \n        "),a("span",[e._v(e._s(e.data.date))])]),a("a",{staticClass:"btn link backbtn",on:{click:function(t){return e.goback()}}},[e._v("返回上页")]),a("hr",{staticClass:"line"})])},r=[],s=a("d225"),i=a("b0b4"),c=a("308d"),b=a("6bb5"),v=a("4e2b"),_=a("9ab4"),o=a("60a3"),p=function(e){function t(){return Object(s["a"])(this,t),Object(c["a"])(this,Object(b["a"])(t).apply(this,arguments))}return Object(v["a"])(t,e),Object(i["a"])(t,[{key:"goback",value:function(){this.$router.go(-1)}}]),t}(o["c"]);_["a"]([Object(o["b"])()],p.prototype,"data",void 0),p=_["a"]([o["a"]],p);var d=p,u=d,l=(a("8786"),a("2877")),h=Object(l["a"])(u,n,r,!1,null,"4d0669a8",null);t["a"]=h.exports},fa67:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wz-page"},[a("articleheader",{attrs:{data:e.artheader}}),a("p",[e._v("rocksdb是一个KV数据库,基于leveldb改进而来.本身是C++语言编写,有java封装")]),e._m(0),a("h3",[e._v("安装")]),e._m(1),a("h3",[e._v("使用")]),a("h4",[e._v("打开数据库")]),a("pre",[e._v('        DbOptions dbop = new DbOptions()\n            .SetCreateIfMissing()\n            .SetEnableWriteThreadAdaptiveYield(true);\n        RocksDb db = RocksDb.Open(dbop, "数据库路径");\n    ')]),a("p",[e._v("SetCreateIfMissing 如果路径上没有找到数据库,则会自动生成")]),a("h4",[e._v("添加")]),a("pre",[e._v("        db.Put(key,value);\n    ")]),a("p",[e._v("key,value是字符串,也可以是字节数组(byte[]).Put方法有多个重载.")]),a("h4",[e._v("删除")]),a("pre",[e._v("        db.Remove(key)\n    ")]),a("p",[e._v("删除键为key的数据")]),a("h4",[e._v("查询")]),a("pre",[e._v("        db.Get(key)\n    ")]),a("p",[e._v("返回key的值")]),a("h4",[e._v("遍历")]),a("pre",[e._v("        Iterator iter = db.NewIterator();\n        iter.Seek(string.Empty);\n        while (iter.Valid())\n        {\n            Console.WriteLine(Convert.ToBase64String(iter.StringKey()));\n            iter.Next();\n        }\n    ")]),a("p",[e._v("Iterator 建立一个遍历器.使用它可以查询DB中的所有键值对.")]),a("p",[e._v("Seek 像是一个搜索要求,如果搜索所有,那么写空表示无要求.有很多重载,可以做匹配搜索")]),a("p",[e._v("Valid: 搜索到最后一个后,返回false.")]),a("p",[e._v("Next: 遍历器指向下一个")]),a("h4",[e._v("搜索")]),a("p",[e._v("遍历中的Seek方法传入一个参数能起到搜索效果.例如 Seek('user') 传入'user'参数后,查询到的key都是user开头的.")]),a("p",[e._v("这个方法比较有用,在关系数据库中,一类数据总是建一张表来存放,例如用户数据,就会建立一个叫user的表.那么中KV数据库中")]),a("p",[e._v("没有表的概念,可以使用加前缀的方法替代.例如所有的用户数据的Key,都加上'user_'前缀,然后使用Seek('user')就能得到所有用户数据")]),a("p",[e._v("前缀参数也可以是byte[],如果对字节了解,那么定义好多字节类型的前缀,分别表示不同的意义.如果设计合理,做成一个封装,会比较便利.")]),a("h3",[e._v("性能测试")]),a("p",[e._v("循环写入1KW次的KV对,K为32字节,V为K.时间63680毫秒.(ssd,i74710)")]),a("pre",[e._v("        for (int i = 0; i < 10000000; i++)\n        {\n            rand.NextBytes(b);\n            db.Put(b, b);\n        }\n    ")]),a("h3",[e._v("键按顺序存储")]),a("p",[e._v("假如存放KV时,如下")]),a("pre",[e._v('        db.Put("2", "34");\n        db.Put("1", "12334");\n        db.Put("9", "asdf");\n    ')]),a("p",[e._v("然后遍历取出来时,顺序是1,2,9.说明rocksdb在存储时做过排序")])],1)},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("\n        c#版本的封装git\n        "),a("a",{attrs:{target:"_blank",href:"https://github.com/warrenfalk/rocksdb-sharp"}}),e._v("https://github.com/warrenfalk/rocksdb-sharp\n    ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("\n        在vs2017中,新建.netcore控制台程序.然后添加两个nuget包:\n        "),a("b",[e._v("RocksDbSharp")]),e._v(" \n        "),a("b",[e._v("RocksDbNative")])])}],s=a("d225"),i=a("308d"),c=a("6bb5"),b=a("4e2b"),v=a("9ab4"),_=a("60a3"),o=a("dedd"),p=function(e){function t(){return Object(s["a"])(this,t),Object(i["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(b["a"])(t,e),t}(_["c"]);v["a"]([Object(_["b"])()],p.prototype,"artheader",void 0),p=v["a"]([Object(_["a"])({components:{articleheader:o["a"]}})],p);var d=p,u=d,l=a("2877"),h=Object(l["a"])(u,n,r,!1,null,"666b8e92",null);t["default"]=h.exports}}]);