<!DOCTYPE html><html lang=en><head><meta charset=utf-8 /><meta http-equiv=X-UA-Compatible content="IE=edge" /><meta name=viewport content="width=device-width,initial-scale=1.0" /><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png /><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png /><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png /><link rel=manifest href=/site.webmanifest /><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5 /><meta name=msapplication-TileColor content=#da532c /><meta name=theme-color content=#ffffff /><title>贝塞尔曲线 | Mirror Space</title><link href=/mirrorui/mirrorui.css rel=stylesheet /><style scoped>.layout{display:grid;grid-template-columns:210px auto;min-height:100vh}.layout-right{padding:30px}</style></head><body><div class=layout><div class=layout-left><style>.mainmenu{position:sticky;top:122px;text-align:center}.mainmenu a{color:var(--graybackse);text-decoration:none}.mainmenu a:hover,.mainmenu a.active{color:var(--fontcolor);text-decoration:underline}.logobox{width:144px;height:144px;overflow:hidden;border-radius:50%;margin:22px auto}.logoimg{margin-left:-56px;animation:circleRoate 6s infinite linear}@keyframes circleRoate{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}</style><div class=mainmenu><div class=logobox><img src=/asset/img/logo.jpg class=logoimg /></div><h3>Mirror Space</h3><hr class=line /><a href=/index.html><h4>Home</h4></a> <a href=/about.html><h4>About</h4></a></div></div><div class=layout-right><div class=wz-page><div><div id=article_headerbox></div><a onclick=window.history.back() class="btn link">返回上页</a><hr class=line /></div><script src=/asset/js/article.js></script><script>(()=>{let f=window.location.pathname,u=f.split("/"),e="article_"+u[2],t=JSON.parse(window.sessionStorage.getItem(e)),i=u[3].replace(".html",""),n={};n.t=t[i][0];n.d=t[i][1];n.a=t[i][2];let r=`<h1 class="text-center">${n.t}</h1>`;r+=`<h5>作者:&emsp;<span></span>${n.a}</h5>`;r+=`<h5>日期:&emsp;<span></span>${n.d}</h5>`;let o=window.document.querySelector("#article_headerbox");o.innerHTML=r})()</script><p>参考了一些资料,贝塞尔曲线的逻辑大概如下</p><h3>约束条件</h3><p>平面上选三个点,三点不共线.设起点为S,终点为E,控制点为C</p><p>SC上取一点A,CE上取一点B,A和B取点时满足 SA/SC==CB/CE</p><p>连接AB,取一点a1,取点满足 Aa1/AB==SA/SC==CB/CE</p><p>a1点就是二次贝塞尔曲线上的一点,使用上述规则找出满足条件的所有点,得到二次贝塞尔曲线</p><div class=grids><canvas id=canvas1></canvas><canvas id=canvas2></canvas></div><h3>一次曲线和多次曲线</h3><p>二次贝塞尔曲线有一个起点一个终点和一个控制点,三次贝塞尔曲线有两个控制点,N次曲线有N-1个控制点(想当然的)</p><p>规则和二次的一样,例如有个4次曲线,那就有3个控制点,加上起止点一共5个.</p><p>设起点S,控制点为(C1,C2,C3),终点E.按照规则,取SC1,C1C2,C2C3,C3E这四条线段上各一点A,B,C,D(下图蓝色点),满足</p><p>SA / SC1 == C1B / C1C2 == C2C / C2C3 == C3D / C3E</p><p>连接A,B,C,D得到三条线段,再一次按规则取,AB,BC,CD这三条线段上各一点F,G,H(下图绿色),满足</p><p>AF / AB == BG / BC == CH / CD</p><p>连接F,G,H得到二条线段,这时,就是一个有3个点的二次曲线情况.最后得到曲线点(下图红色)</p><p>N次曲线,最终都会收窄成二次曲线的情况,然后得到最终曲线</p><canvas id=canvas3></canvas><p>如果二次曲线的控制点在起点和终点的连线上会如何.结果曲线成了一条直线.那么一次贝塞尔曲线是直线</p><p>那么这也能说明,直线是曲线的特例,2点间最短的距离是直线</p><canvas id=canvas4></canvas></div><script>function test4(){var t;let n=getCanvas2d("canvas4");n.lineWidth=2;n.font="16px serial";let r={x:20,y:70},u={x:120,y:70},f={x:260,y:70};n.moveTo(r.x,r.y);n.lineTo(u.x,u.y);n.lineTo(f.x,f.y);n.stroke();n.fillText("S",r.x,r.y+15);n.fillText("C",u.x,u.y+15);n.fillText("E",f.x,f.y+15);let i=getPointsBezier(r,u,f,28);for(t=0;t<i.a.length;t++)n.beginPath(),n.fillStyle="black",n.fillText("A"+(t+1),i.a[t].x-25,i.a[t].y-5),n.arc(i.a[t].x,i.a[t].y,4,0,Math.PI*2),n.fill(),n.beginPath(),n.fillText("B"+(t+1),i.b[t].x+5,i.b[t].y-5),n.arc(i.b[t].x,i.b[t].y,4,0,Math.PI*2),n.fill(),n.beginPath(),n.fillStyle="red",n.fillText("a"+(t+1),i.a1[t].x-10,i.a1[t].y+20),n.arc(i.a1[t].x,i.a1[t].y,4,0,Math.PI*2),n.fill(),n.beginPath(),n.moveTo(i.a[t].x,i.a[t].y),n.lineTo(i.b[t].x,i.b[t].y),n.strokeStyle="green",n.stroke();for(n.beginPath(),n.strokeStyle="red",n.moveTo(i.a1[0].x,i.a1[0].y),t=1;t<i.a1.length;t++)n.lineTo(i.a1[t].x,i.a1[t].y);n.stroke()}function test3(){let n=getCanvas2d("canvas3");n.lineWidth=2;n.font="16px serial";let p={x:20,y:20},w={x:40,y:120},h={x:120,y:130},b={x:200,y:100},k={x:260,y:20};n.moveTo(p.x,p.y);n.lineTo(w.x,w.y);n.lineTo(h.x,h.y);n.lineTo(b.x,b.y);n.lineTo(k.x,k.y);n.stroke();n.fillText("S",5,15);n.fillText("C1",10,130);n.fillText("C2",100,145);n.fillText("C3",200,120);n.fillText("E",270,20);n.fillStyle=n.strokeStyle="blue";let c=getPointsBezier(p,w,h),l=getPointsBezier(h,b,k),r={x:c.a[10].x,y:c.a[12].y},t={x:c.b[10].x,y:c.b[12].y},i={x:l.a[10].x,y:l.a[12].y},u={x:l.b[10].x,y:l.b[12].y};n.fillText("A",r.x+5,r.y);n.fillText("B",t.x,t.y+20);n.fillText("C",i.x,i.y+20);n.fillText("D",u.x+10,u.y+5);n.beginPath();n.arc(r.x,r.y,4,0,Math.PI*2);n.fill();n.beginPath();n.arc(t.x,t.y,4,0,Math.PI*2);n.fill();n.beginPath();n.arc(i.x,i.y,4,0,Math.PI*2);n.fill();n.beginPath();n.arc(u.x,u.y,4,0,Math.PI*2);n.fill();n.beginPath();n.moveTo(r.x,r.y);n.lineTo(t.x,t.y);n.lineTo(i.x,i.y);n.lineTo(u.x,u.y);n.stroke();n.fillStyle=n.strokeStyle="green";let a=getPointsBezier(r,t,i),d=getPointsBezier(t,i,u),f={x:a.a[10].x,y:a.a[12].y},e={x:a.b[10].x,y:a.b[12].y},o={x:d.b[10].x,y:d.b[12].y};n.fillText("F",f.x+5,f.y);n.fillText("G",e.x,e.y+20);n.fillText("H",o.x,o.y+20);n.beginPath();n.arc(f.x,f.y,4,0,Math.PI*2);n.fill();n.beginPath();n.arc(e.x,e.y,4,0,Math.PI*2);n.fill();n.beginPath();n.arc(o.x,o.y,4,0,Math.PI*2);n.fill();n.beginPath();n.moveTo(f.x,f.y);n.lineTo(e.x,e.y);n.lineTo(o.x,o.y);n.stroke();let s=getPointsBezier(f,e,o),v={x:s.a[12].x,y:s.a[12].y},y={x:s.b[12].x,y:s.b[12].y},g={x:s.a1[12].x,y:s.a1[12].y};n.beginPath();n.fillStyle=n.strokeStyle="red";n.arc(v.x,v.y,4,0,Math.PI*2);n.fill();n.beginPath();n.arc(y.x,y.y,4,0,Math.PI*2);n.fill();n.beginPath();n.arc(g.x,g.y,4,0,Math.PI*2);n.fill();n.beginPath();n.moveTo(v.x,v.y);n.lineTo(y.x,y.y);n.stroke()}function test2(){let n=getCanvas2d("canvas2"),r={x:20,y:120},u={x:80,y:30},f={x:250,y:130},t=getPointsBezier(r,u,f,1),i=0,o=t.a.length,e=()=>{n.clearRect(0,0,300,150);n.moveTo(r.x,r.y);n.lineTo(u.x,u.y);n.lineTo(f.x,f.y);n.strokeStyle="black";n.stroke();n.beginPath();n.fillStyle="red";n.arc(t.a[i].x,t.a[i].y,4,0,Math.PI*2);n.fill();n.beginPath();n.arc(t.b[i].x,t.b[i].y,4,0,Math.PI*2);n.fill();n.beginPath();n.fillStyle="blue";n.arc(t.a1[i].x,t.a1[i].y,4,0,Math.PI*2);n.fill();n.beginPath();n.moveTo(t.a[i].x,t.a[i].y);n.lineTo(t.b[i].x,t.b[i].y);n.strokeStyle="green";n.stroke();n.beginPath();n.strokeStyle="blue";n.moveTo(t.a1[0].x,t.a1[0].y);for(var s=1;s<i;s++)n.lineTo(t.a1[s].x,t.a1[s].y);if(n.stroke(),i++,i===o){i=0;window.setTimeout(()=>{window.requestAnimationFrame(e)},1e3);return}window.requestAnimationFrame(e)};window.requestAnimationFrame(e)}function test1(){var t;let n=getCanvas2d("canvas1");n.lineWidth=2;n.font="16px serial";let r={x:20,y:120},u={x:80,y:30},f={x:250,y:130};n.moveTo(r.x,r.y);n.lineTo(u.x,u.y);n.lineTo(f.x,f.y);n.stroke();n.fillText("S(起点)",5,140);n.fillText("C(控制点)",60,20);n.fillText("E(终点)",250,145);let i=getPointsBezier(r,u,f,28);for(t=0;t<i.a.length;t++)n.beginPath(),n.fillStyle="black",n.fillText("A"+(t+1),i.a[t].x-25,i.a[t].y-5),n.arc(i.a[t].x,i.a[t].y,4,0,Math.PI*2),n.fill(),n.beginPath(),n.fillText("B"+(t+1),i.b[t].x+5,i.b[t].y-5),n.arc(i.b[t].x,i.b[t].y,4,0,Math.PI*2),n.fill(),n.beginPath(),n.fillStyle="red",n.fillText("a"+(t+1),i.a1[t].x-10,i.a1[t].y+20),n.arc(i.a1[t].x,i.a1[t].y,4,0,Math.PI*2),n.fill(),n.beginPath(),n.moveTo(i.a[t].x,i.a[t].y),n.lineTo(i.b[t].x,i.b[t].y),n.strokeStyle="green",n.stroke();for(n.beginPath(),n.strokeStyle="red",n.moveTo(i.a1[0].x,i.a1[0].y),t=1;t<i.a1.length;t++)n.lineTo(i.a1[t].x,i.a1[t].y);n.stroke()}function getPointsBezier(n,t,i,r=2){let u=r,e=Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2)),f={a:[],b:[],a1:[]};if(n.x===t.x){for(;;){let o={x:0,y:0};if(o.x=n.x,o.y=n.y+(n.y>t.y?-u:+u),o.y>Math.max(n.y,t.y)||o.y<Math.min(n.y,t.y))break;let s={x:0,y:0};s.x=t.x+u*(i.x-t.x)/e;s.y=t.y-(t.y-i.y)*(s.x-t.x)/(i.x-t.x);let h={x:0,y:0};h.x=o.x+u*(s.x-o.x)/e;h.y=o.y-(o.y-s.y)*(h.x-o.x)/(s.x-o.x);u+=r;f.a.push(o);f.b.push(s);f.a1.push(h)}return f}for(;;){let o={x:0,y:0};if(o.x=n.x+u*(t.x-n.x)/e,o.y=n.y-(n.y-t.y)*(o.x-n.x)/(t.x-n.x),o.x>Math.max(n.x,t.x)||o.x<Math.min(n.x,t.x))break;let s={x:0,y:0};s.x=t.x+u*(i.x-t.x)/e;s.y=t.y-(t.y-i.y)*(s.x-t.x)/(i.x-t.x);let h={x:0,y:0};h.x=o.x+u*(s.x-o.x)/e;h.y=o.y-(o.y-s.y)*(h.x-o.x)/(s.x-o.x);u+=r;f.a.push(o);f.b.push(s);f.a1.push(h)}return f}function getCanvas2d(n){const t=document.querySelector("#"+n);if(t!=null){t.style.display="block";t.style.margin="20px";t.style.backgroundColor="#f0f0f0";return t.getContext("2d")}}test1();test2();test3();test4()</script></div></div></body></html>