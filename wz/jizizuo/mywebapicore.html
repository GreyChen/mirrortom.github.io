<!DOCTYPE html><html lang=en><head><meta charset=utf-8 /><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1" /><meta name=viewport content="width=device-width,initial-scale=1.0,user-scalable=no" /><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png /><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png /><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png /><link rel=manifest href=/site.webmanifest /><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5 /><meta name=msapplication-TileColor content=#da532c /><meta name=theme-color content=#ffffff /><title>文章 | Mirror Space</title><link href=/mirrorui/mirrorui.css rel=stylesheet /><link href=/asset/css/blog.css rel=stylesheet /></head><body><div class=layout><div class=layout-part1><a class="mainmenu-onoff d-block d-md-none" onclick=mainmenuonoff()>Ω</a><div id=mainmenubox class="mainmenu d-none d-md-block"><div class=logobox> <img src=/asset/img/logo.jpg class=logoimg /></div><h3 class=pd-5>Mirror Space</h3><hr class=line /><a class=mainmenu-link href=/index.html>Home</a> <a class=mainmenu-link href=/about.html>About</a> <a class=mainmenu-link href=/projectinfo.html>Info</a><div class=theme id=themebox> <a class=mainmenu-btn onclick=changetheme(1)>白天sun</a> <a class=mainmenu-btn onclick=changetheme(2)>夜晚moon</a><br /> <a class=mainmenu-btn onclick=changefontsize(14)>A</a> <a class=mainmenu-btn onclick=changefontsize(16)>AA</a> <a class=mainmenu-btn onclick=changefontsize(20)>AAA</a></div></div><script src=/asset/js/mainmenu.js></script></div><div class=layout-part2><div class=wz-page><div><div id=article_headerbox></div><a onclick=window.history.back() class="btn link danger">返回上页</a><hr class=line /></div><script src=/asset/js/article.js></script><script>(()=>{let f=window.location.pathname,u=f.split("/"),e="article_"+u[2],t=JSON.parse(window.sessionStorage.getItem(e)),i=u[3].replace(".html",""),n={};n.t=t[i][0];n.d=t[i][1];n.a=t[i][2];let r=`<h1 class="text-center">${n.t}</h1>`;r+=`<h5>作者:&emsp;<span></span>${n.a}</h5>`;r+=`<h5>日期:&emsp;<span></span>${n.d}</h5>`;let o=window.document.querySelector("#article_headerbox");o.innerHTML=r})()</script><p>使用asp.net core平台的,自定义webapi项目实现.用dotnet core 控制台项目改进而来.</p><p>asp.net core监听请求使用了kestrel服务器,响应请求使用的是"中间件",与经典的asp.net管理事件相似,每个"中件间"就相当于一个处理事件.</p><p>asp.net core程序跨平台,不再依赖于iis.可以部署在linux上.</p><p><a href=https://www.cnblogs.com/artech/p/inside-asp-net-core-framework.html target=_blank>https://www.cnblogs.com/artech/p/inside-asp-net-core-framework.html</a> asp.net core的理解全靠看了这个文章,风格简单明了.</p><p>webapi程序依然是要解决三个问题.监听,匹配,处理.</p><p>asp.net core的监听,使用了kestrel服务器.与asp.net需要在IIS中托管不同.这个是自带的服务器,可以独立运行.</p><p>url路径分析是做了个中间件,逻辑和asp.net版本的一样</p><p>这个项目采用了Task这异步的方式,以前用的很少,不是太了解.</p><p>部署有多种方案,可以独立运行,也可做为反向代理放到IIS,apache,nginx后面,windos平台可以做成windos服务.这个测试项目使用的是托管成windows服务.</p><p>以windows服务方式运行,需要添加一个类库 Microsoft.AspNetCore.Hosting.WindowsServices ,然后程序启动时使用.RunAsService() 具体参照这篇文章 <a href=https://www.cnblogs.com/guogangj/p/9198031.html>https://www.cnblogs.com/guogangj/p/9198031.html</a></p><p>源码 <a href=https://github.com/mirrortom/MyWebApiCore target=_blank>https://github.com/mirrortom/MyWebApiCore</a></p><h2>差别</h2><p>与asp.net的差别比较大了,功能上感觉更先进,处理程序设计上也改进很大</p><ul><li>自带服务器kestrel,可以独立部署.除了windows,可部署Linux,真正跨平台.</li><li>中间件相当于管道事件,可以自由定义,而不用限制在asp.net的十几个事件点上.</li><li>系统自带了丰富的中间件,像跨域之类的.只需要配置一下就跨域了.mvc webapi这些框架也都有,习惯差不多.不过前后端分离的话,这些基本没用了.</li></ul></div></div></div></body></html>