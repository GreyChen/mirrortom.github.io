<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <link href="/mirrorui/mirrorui.min.css" rel="stylesheet" />
  <title>省市区示例</title>
</head>
<body><div class="mg-lr-15"><script src="../provcityarea.min.js"></script>
<div class="grids">
  <div class="grid-1 text-center">省</div>
  <div class="grid-3"><select class="select sm" id="provbox"></select></div>
  <div class="grid-1 text-center">市</div>
  <div class="grid-3"><select class="select sm" id="citybox"></select></div>
  <div class="grid-1 text-center">区</div>
  <div class="grid-3"><select class="select sm" id="areabox"></select></div>
</div>
<div>
  <a class="btn link" href="../provcityarea.js">json下载(右击另存为)</a>
</div>
<script>
  let pdom = document.querySelector('#provbox');
  let cdom = document.querySelector('#citybox');
  let adom = document.querySelector('#areabox');

  // 省
  let provs = provcityarea.getProvs();
  pdom.innerHTML = createOps(provs);
  c();
  a();

  function c() {
    // 市
    let citys = provcityarea.getCitysByProvId(pdom.value);
    cdom.innerHTML = createOps(citys);
  }
  function a() {
    // 区
    let areas = provcityarea.getAreasByCityId(cdom.value);
    adom.innerHTML = createOps(areas);
  }
  // 省变动时
  pdom.onchange = () => {
    c();
    a();
  }
  // 市变动时
  cdom.onchange = () => {
    a();
  }
  function createOps(json) {
    let ops = '';
    for (let k in json) {
      ops += `<option value="${k}">${json[k]}</option>`;
    }
    return ops;
  }
</script>
</div></body>
</html>